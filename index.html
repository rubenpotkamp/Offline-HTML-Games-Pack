<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Games</title>
    <style>
      #games-list {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
        gap: 10px;
        margin-bottom: 20px;
      }

      .game-button {
        padding: 10px;
        background: #222;
        color: white;
        border: 1px solid #444;
        border-radius: 6px;
        cursor: pointer;
      }

      .game-button:hover {
        background: #444;
      }

      #fullscreen-btn {
        margin-bottom: 15px;
      }

      #game-wrapper {
        width: 100%;
        height: 700px;
        position: relative;
      }

      #game-wrapper iframe {
        width: 100%;
        height: 100%;
        border: none;
      }

      #game-wrapper:fullscreen {
        width: 100vw;
        height: 100vh;
      }
    </style>
  </head>
  <body>
    <h2>ðŸŽ® Games</h2>

    <button id="fullscreen-btn" class="game-button">
      â›¶ Fullscreen
    </button>

    <div id="games-list"></div>

    <div id="game-wrapper">
      <iframe id="game-frame"></iframe>
    </div>

    <script>
      const owner = "rubenpotkamp";
      const repo = "Offline-HTML-Games-Pack";
      const path = "offline";
      const pagesBase = "https://rubenpotkamp.github.io/Offline-HTML-Games-Pack/";

      const listDiv = document.getElementById("games-list");
      const iframe = document.getElementById("game-frame");
      const fullscreenBtn = document.getElementById("fullscreen-btn");
      const gameWrapper = document.getElementById("game-wrapper");

      // Games ophalen
      fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}`)
        .then(res => res.json())
        .then(files => {
          files
            .filter(file => file.name.endsWith(".html"))
            .forEach(file => {
              const btn = document.createElement("button");
              btn.textContent = file.name.replace(".html", "");
              btn.className = "game-button";

              btn.onclick = () => {
                iframe.src = pagesBase + path + "/" + file.name;
              };

              listDiv.appendChild(btn);
            });
        })
        .catch(err => {
          console.error("Fout bij laden games:", err);
          listDiv.textContent = "Kon games niet laden.";
        });

      // Fullscreen toggle
      fullscreenBtn.onclick = () => {
        if (!document.fullscreenElement) {
          gameWrapper.requestFullscreen();
        } else {
          document.exitFullscreen();
        }
      };

      // Knoptekst aanpassen
      document.addEventListener("fullscreenchange", () => {
        if (document.fullscreenElement) {
          fullscreenBtn.textContent = "â¤¢ Exit Fullscreen";
        } else {
          fullscreenBtn.textContent = "â›¶ Fullscreen";
        }
      });
    </script>
  </body>
</html>
